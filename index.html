<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu des Emojis Population</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #f5f5f5; }
    #tv { font-size: 5rem; border: 4px solid #333; width: 150px; height: 150px; margin: 20px auto; display: flex; align-items: center; justify-content: center; background: white; }
    #grid { display: grid; grid-template-columns: repeat(6, 60px); grid-gap: 10px; justify-content: center; }
    .emoji { font-size: 2rem; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Population Emoji</h1>
  <div id="tv">📺</div>
  <div id="grid"></div>

  <script>
    // Emojis uniquement avec des émotions
    const emojis = ["😀","😁","😂","🤣","😅","😊","😍","😘","😎","😔","😭","😡","🤯","😱","😴","🤔","😇","🥶","🥵","🤢","🤠","🥳","😤","😒","😬","🤐","🤓","😕","🤡","🥺"];

    const grid = document.getElementById("grid");
    const tv = document.getElementById("tv");

    let population = [];

    // Initialiser la population
    function initPopulation() {
      population = [];
      grid.innerHTML = "";
      for (let i = 0; i < 30; i++) {
        const e = randomEmoji();
        population.push(e);
        addEmojiToGrid(e, i);
      }
    }

    // Ajouter un emoji cliquable dans la grille
    function addEmojiToGrid(e, index) {
      const span = document.createElement("span");
      span.className = "emoji";
      span.textContent = e;
      span.addEventListener("click", () => showOnTV(index));
      grid.appendChild(span);
    }

    // Choisir un emoji aléatoire
    function randomEmoji() {
      return emojis[Math.floor(Math.random() * emojis.length)];
    }

    // Afficher un emoji sur la télévision et appliquer effet
    function showOnTV(index) {
      const e = population[index];
      tv.textContent = e;
      applyEffect(e);
    }

    // Effets différents pour chaque emoji
    function applyEffect(e) {
      switch(e) {
        case "😭": // Les pleurs contaminent 5 voisins
          transformRandom(5, "😭");
          break;
        case "😎": // Cool vibes : 50% deviennent 😎
          transformPercentage(0.5, "😎");
          break;
        case "😀": // Bonne humeur : tout le monde devient 😀
          transformAll("😀");
          break;
        case "😡": // Colère : 10 deviennent 😡
          transformRandom(10, "😡");
          break;
        case "🥳": // Fête : 30% deviennent 🥳
          transformPercentage(0.3, "🥳");
          break;
        case "😴": // Sommeil : 20% deviennent 😴
          transformPercentage(0.2, "😴");
          break;
        case "🤔": // Réflexion : 5 deviennent 🤔
          transformRandom(5, "🤔");
          break;
        case "😱": // Panique : 40% deviennent 😱
          transformPercentage(0.4, "😱");
          break;
        case "😍": // Amour : 25% deviennent 😍
          transformPercentage(0.25, "😍");
          break;
        case "🤯": // Explosion mentale : tout le monde devient différent aléatoirement
          for (let i = 0; i < population.length; i++) {
            const newE = randomEmoji();
            population[i] = newE;
            grid.children[i].textContent = newE;
          }
          break;
        default:
          // Par défaut : transformer 3 au hasard en l'emoji choisi
          transformRandom(3, e);
      }
    }

    // Fonctions utilitaires pour transformer la population
    function transformRandom(n, emoji) {
      for (let i = 0; i < n; i++) {
        const idx = Math.floor(Math.random() * population.length);
        population[idx] = emoji;
        grid.children[idx].textContent = emoji;
      }
    }

    function transformAll(emoji) {
      for (let i = 0; i < population.length; i++) {
        population[i] = emoji;
        grid.children[i].textContent = emoji;
      }
    }

    function transformPercentage(p, emoji) {
      const n = Math.floor(population.length * p);
      transformRandom(n, emoji);
    }

    // Mutation aléatoire toutes les 5 secondes
    function mutatePopulation() {
      const count = Math.floor(population.length * 0.2); // 20%
      for (let i = 0; i < count; i++) {
        const idx = Math.floor(Math.random() * population.length);
        const e = randomEmoji();
        population[idx] = e;
        grid.children[idx].textContent = e;
      }
    }

    // Lancer le jeu
    initPopulation();
    setInterval(mutatePopulation, 5000);
  </script>
</body>
</html>
